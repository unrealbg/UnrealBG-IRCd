// Trusted LAN baseline configuration
//
// Goals:
// - Use the built-in "trusted-lan" security profile defaults
// - Enable plaintext IRC if desired (internal only)
// - Keep S2S disabled unless you run a network
// - Keep operational HTTP bound to localhost

security {
    profile = "trusted-lan";
};

serverinfo {
    name = "irc.lan";
    sid = "001";
    description = "LAN IRC Server";
    network = "LAN";
    version = "UnrealBG-IRCd";
    adminLocation1 = "LAN";
    adminLocation2 = "Admin";
    adminEmail = "admin@lan";
};

include "../../IRCd.Server/confs/isupport.conf";
include "../../IRCd.Server/confs/transport.conf";
include "../../IRCd.Server/confs/flood.conf";
include "../../IRCd.Server/confs/auth.conf";
include "../../IRCd.Server/confs/limits.conf";
include "../../IRCd.Server/confs/bans.conf";
include "../../IRCd.Server/confs/connectionguard.conf";
include "../../IRCd.Server/confs/connectionprecheck.conf";
include "../../IRCd.Server/confs/ratelimit.conf";
include "../../IRCd.Server/confs/autodline.conf";
include "../../IRCd.Server/confs/sasl.conf";
include "../../IRCd.Server/confs/ping.conf";
include "../../IRCd.Server/confs/opersecurity.conf";
include "../../IRCd.Server/confs/services.conf";
include "../../IRCd.Server/confs/links.conf";
include "../../IRCd.Server/confs/classes.conf";
include "../../IRCd.Server/confs/opers.conf";
include "../../IRCd.Server/confs/motd.conf";

listen {
    bind = "0.0.0.0";

    // LAN deployments often allow plaintext internally; keep firewall-restricted.
    clientport = 6667;

    enabletls = true;
    tlsclientport = 6697;

    requestclientcertificate = false;

    // Self-signed is fine for LAN; swap with a real cert if needed.
    tlscertificatepath = "";
    tlscertificatepassword = "";
    autogenerateselfsignedcertificate = true;
    autogeneratedcertpath = "certs/auto-generated.pfx";
    autogeneratedcertpassword = "ChangeMe";
    autogeneratedcertdaysvalid = 365;
    autogeneratedcertcommonname = "irc.lan";

    // S2S disabled by default
    serverport = 0;
};

observability {
    enabled = true;
    bind = "127.0.0.1";
    port = 6060;
};

opersecurity {
    require_hashed_passwords = true;
};
